@{
    ViewData["Title"] = "Login";
}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Your existing custom CSS classes for login-background, login-container, etc. */
        .login-background {
            /* Example: background-color: #f0f2f5; */
        }

        .login-container {
            /* Example: background: rgba(255, 255, 255, 0.8); border-radius: 15px; padding: 20px; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); */
        }

        .login-glass {
            /* Example: Same as login-container for glass effect if needed */
        }

        .title-highlight {
            /* Example: color: #ff6600; */
        }

        .login-label {
            /* Example: font-weight: bold; color: #333; */
        }

        .login-input {
            /* Example: border-radius: 8px; border: 1px solid #ddd; padding: 10px; */
            /* Ensure enough padding-right for the eye icon */
            padding-right: 40px; /* Increased to make space for the icon */
        }

        .btn-orange {
            /* Example: background-color: #ff6600; border-color: #ff6600; */
        }


        /* CSS to hide the native IE/Edge password reveal icon */
        input[type="password"]::-ms-reveal {
            display: none;
        }

        /* Container for password input and eye icon */
        .password-container {
            position: relative; /* Essential for absolute positioning of the icon */
        }

        /* Custom eye icon styling and positioning */
        .toggle-eye {
            position: absolute;
            right: 12px; /* Adjust as needed to position within the input */
            top: 50%; /* Vertically center the icon */
            transform: translateY(-50%); /* Fine-tune vertical centering */
            cursor: pointer;
            color: #888; /* A subtle grey for the icon */
            z-index: 2; /* Ensure it's above the input field */
            font-size: 0.9rem; /* Adjust icon size if necessary */
        }
    </style>
</head>

<div class=" login-background">
    <div class="container d-flex justify-content-center align-items-center min-vh-100">
        <main role="main" class="" style="width: 100%;max-width: 500px;">
            <div class="login-container">
                <div class="col-lg-12">
                    <div class="login-glass text-center">
                        <h3 class="mb-3"><span class="title-highlight">Let's</span> Login!</h3>

                        <form method="post">
                            <div class="mb-3 text-start">
                                <label for="ccno" class="form-label login-label">Card No. :</label>
                                <input type="text" class="form-control login-input" id="ccno" name="ccno" placeholder="Enter your Card No." required>
                            </div>
                            <div class="mb-4 text-start">
                                <label for="refPassword" class="form-label login-label">Password:</label>

                                <div class="password-container">
                                    <input type="password" class="form-control login-input" id="refPassword"
                                           name="refPassword" placeholder="Enter your Password" autocomplete="off" required>

                                    <i class="fa-solid fa-eye-slash toggle-eye" id="eyeIcon"
                                       onclick="togglePassword()" style="display: none;"></i>
                                </div>
                            </div>

                            @if (ViewBag.Error != null)
                            {
                                <div class="py-1" style="color: red;font-weight: bold;">
                                    @ViewBag.Error
                                </div>
                            }

                            <button type="submit" class="btn btn-orange w-100 text-white fw-bold">LOGIN</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    const pwdInput = document.getElementById("refPassword");
    const eyeIcon = document.getElementById("eyeIcon");

    function togglePassword() {
        if (pwdInput.type === "password") {
            pwdInput.type = "text";
            eyeIcon.classList.remove("fa-eye-slash");
            eyeIcon.classList.add("fa-eye");
        } else {
            pwdInput.type = "password";
            eyeIcon.classList.remove("fa-eye");
            eyeIcon.classList.add("fa-eye-slash");
        }
    }

    // Show/hide the eye icon based on input value
    pwdInput.addEventListener("input", function () {
        if (pwdInput.value.length > 0) {
            eyeIcon.style.display = "block"; // Show the icon
        } else {
            eyeIcon.style.display = "none"; // Hide the icon
            pwdInput.type = "password"; // Revert to password type if empty
            eyeIcon.classList.remove("fa-eye");
            eyeIcon.classList.add("fa-eye-slash"); // Ensure eye-slash when hidden
        }
    });

    // Optional: Also check on page load if there's pre-filled value (e.g., from browser autofill)
    // This makes sure the icon shows if the field is not empty initially
    document.addEventListener("DOMContentLoaded", function() {
        if (pwdInput.value.length > 0) {
            eyeIcon.style.display = "block";
        }
    });
</script>